<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Shoe Shine and Cleaning</title>
    <script>
      (function () {
        try {
          var saved = localStorage.getItem("theme");
          if (saved === "dark") {
            document.documentElement.setAttribute("data-theme", "dark");
          }
        } catch (e) {}
      })();
    </script>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&family=Playfair+Display:ital,wght@0,400..900;1,400..900&family=Playwrite+IN:wght@100..400&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Quicksand:wght@300..700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="styles.css" />
    <link rel="icon" type="image/png" href="icon.png" />
    <link rel="apple-touch-icon" href="icon.png" />
    <link rel="manifest" href="manifest.json" />
    <meta name="theme-color" content="#7b451f" />
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "LocalBusiness",
        "name": "BUFF Shoe Care",
        "url": "https://www.buffwork.com",
        "image": "https://www.buffwork.com/icon.png",
        "telephone": "+65 91870187",
        "email": "hello@buffwork.com",
        "address": {
          "@type": "PostalAddress",
          "streetAddress": "65 Airport Blvd., #03-37 Terminal 3",
          "addressLocality": "Singapore",
          "postalCode": "819663",
          "addressCountry": "SG"
        },
        "areaServed": "Singapore",
        "priceRange": "$$",
        "sameAs": [
          "https://wa.me/6591870187"
        ],
        "hasOfferCatalog": {
          "@type": "OfferCatalog",
          "name": "The Services",
          "itemListElement": [
            {
              "@type": "Offer",
              "name": "BUFF’s Dress Shoe Deep Shine",
              "priceCurrency": "SGD",
              "price": "30"
            },
            {
              "@type": "Offer",
              "name": "BUFF’s Sneaker Revival Clean",
              "priceCurrency": "SGD",
              "price": "30"
            },
            {
              "@type": "Offer",
              "name": "Unyellowing of Sneaker Soles",
              "priceCurrency": "SGD",
              "price": "30"
            },
            {
              "@type": "Offer",
              "name": "Minor Restoration",
              "priceCurrency": "SGD",
              "priceSpecification": {
                "@type": "PriceSpecification",
                "minPrice": "30",
                "priceCurrency": "SGD"
              }
            }
          ]
        }
      }
    </script>
  </head>

  <body>
    <!-- Glass pill navbar with dropdowns -->
    <div class="nav-wrap">
      <nav class="nav" aria-label="Main">
        <button
          class="hamburger"
          id="hamburger"
          aria-label="Open menu"
          aria-controls="mobile-menu"
          aria-expanded="false"
        >
          <svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
            <path d="M3 6h18v2H3V6zm0 5h18v2H3v-2zm0 5h18v2H3v-2z" />
          </svg>
        </button>
        <div class="menu-item">
          <a class="nav-btn" href="our-services.html">Services</a>
        </div>

        <div class="menu-item">
          <a class="nav-btn" href="gallery.html">Gallery</a>
        </div>

        <!-- <div class="menu-item">
          <a class="nav-btn" href="about-us.html">About Us</a>
        </div> -->

        <div class="nav-sep"></div>
        <button
          class="nav-btn"
          id="theme-toggle"
          aria-pressed="false"
          aria-label="Toggle color scheme"
        >
          Light
        </button>
      </nav>
    </div>

    <div class="mobile-menu" id="mobile-menu" hidden>
      <a href="our-services.html">Our Services</a>
      <a href="gallery.html">Gallery</a>
      <!-- <a href="about-us.html">About Us</a> -->
      <a href="https://wa.me/6591870187" target="_blank" rel="noopener"
        >WhatsApp</a
      >
    </div>

    <!-- <script type="module" src="https://unpkg.com/@splinetool/viewer@1.10.70/build/spline-viewer.js"></script>
  <div class="spline-container">
    <spline-viewer loading-anim-type="spinner-big-dark" url="https://prod.spline.design/O7srxNeUrU5UxUHB/scene.splinecode"></spline-viewer>  </div> -->
    <main class="container" style="padding: 0 !important">
      <section class="hero" id="services">
        <div class="hero-wrap">
          <div class="wordmark" id="wordmark">Buff</div>
        </div>
      </section>
      <section class="hero-content container">
        <p class="hero-subtitle">
          Your favourite shoes deserve a glow‑up. Step out in a ‘brand‑new’ pair of shoes. Make an entrance. Turn heads. Close that deal. <strong>Buff</strong> it up.
          <br /><br />
          From premium dress shoes to everyday sneakers, <strong>Buff</strong> provides services in cleaning, shining and minor restoration works. Every shoe that comes through our doors receives meticulous, hands‑on care. Whether it’s a classic leather pair that needs a mirror‑finish shine or sneakers that deserve a deep and gentle clean, we approach each job with the same dedication and passion for perfection.
          <br /><br />
          We take pride in our process — from the premium cleaning solutions and polishes we use, to the specialised techniques our team has mastered through training and experience. Each step is designed to revive, protect, and enhance your shoes while preserving their original quality.
          <br /><br />
          All these from the comfort of your own home, because we provide <strong>complimentary pick‑up</strong> from your home and a <strong>return delivery</strong> when the job is done.
          <br /><br />
          At <strong>Buff</strong>, we believe shoe care is more than maintenance — it’s a craft. Every session reflects our commitment to excellence, our attention to detail, and our genuine love for what we do.
          <br /><br />
          Simply contact us via WhatsApp or email us at <a class="mailto" id="mailto" href="mailto:hello@buffwork.com">hello@buffwork.com</a> to make an enquiry.
        </p>
        <a
          class="btn whatsapp-outline"
          href="https://wa.me/6591870187"
          target="_blank"
          rel="noopener"
        >
          📞 WhatsApp
        </a>
      </section>
    </main>

    <main class="container">
      <section
        class="showcase"
        aria-label="Before and after gallery"
        id="home-showcase-root"
      >
        <div
          class="showcase-grid title-row"
          style="
            background-color: #8a7760;
            padding-bottom: 1px !important;
            padding-top: 15px !important;
          "
        >
          <h1
            class="section-title"
            style="
              font-size: 250%;
              background-color: #8a7760;
              padding-bottom: 3px !important;
              padding-top: 3px !important;
            "
          >
            Our Showcase
          </h1>
        </div>
        <div class="showcase-grid">
          <!-- Card 1 -->
          <article class="case-card">
            <div class="case-images">
              <img
                src="assets/showcase-01-before.jpg"
                alt="Before - Adidas NMD CS2 Primeknit ‘Ronin’ with severe yellowing"
              />
              <img
                src="assets/showcase-01-after.jpg"
                alt="After - Adidas NMD CS2 Primeknit ‘Ronin’ restored to original condition"
              />
            </div>
            <p class="case-caption">
              Reversed severe yellowing of a pair of Adidas NMD CS2 Primeknit
              ‘Ronin’ shoes and restored it back to its original condition.
            </p>
          </article>
          <!-- Card 2 -->
          <article class="case-card">
            <div class="case-images">
              <img
                src="assets/showcase-02-before.jpg"
                alt="Before - Nike Air Force Ones with suede wear and yellowed soles"
              />
              <img
                src="assets/showcase-02-after.jpg"
                alt="After - Nike Air Force Ones with refreshed suede and de-yellowed soles"
              />
            </div>
            <p class="case-caption">
              Refreshed the suede surfaces and reversed the severe yellowing of
              the sole and mid sole of this pair of Nike Air Force Ones.
            </p>
          </article>
          <!-- Card 3 -->
          <article class="case-card">
            <div class="case-images">
              <img
                src="assets/showcase-03-before.jpg"
                alt="Before - ON Cloudrunner 2 with heavy dirt on white uppers"
              />
              <img
                src="assets/showcase-03-after.jpg"
                alt="After - ON Cloudrunner 2 deeply cleansed and waterproofed"
              />
            </div>
            <p class="case-caption">
              Deep cleansing of a white pair of ON Cloudrunner 2 running shoes,
              with a waterproofing finish.
            </p>
          </article>
        </div>

        <!-- Row 2 -->
        <div class="showcase-grid">
          <!-- Card 4 -->
          <article class="case-card">
            <div class="case-images">
              <img
                src="assets/showcase-04-before.jpg"
                alt="Before - Kenford Oxfords lacking shine"
              />
              <img
                src="assets/showcase-04-after.jpg"
                alt="After - Kenford Oxfords with thorough mirror shine"
              />
            </div>
            <p class="case-caption">
              Performed a thorough mirror shine on black pair of Kenford
              Oxfords.
            </p>
          </article>
          <!-- Card 5 -->
          <article class="case-card">
            <div class="case-images">
              <img
                src="assets/showcase-05-before.jpg"
                alt="Before - Maroon toe cap Derbys with faded colour"
              />
              <img
                src="assets/showcase-05-after.jpg"
                alt="After - Maroon toe cap Derbys nourished with high shine"
              />
            </div>
            <p class="case-caption">
              Thorough nourishment and colour restoration of this pair of maroon
              toe cap Derbys, finishing off with a high shine.
            </p>
          </article>
          <!-- Card 6 -->
          <article class="case-card">
            <div class="case-images">
              <img
                src="assets/showcase-06-before.jpg"
                alt="Before - Cole Haan tasselled loafers dull finish"
              />
              <img
                src="assets/showcase-06-after.jpg"
                alt="After - Cole Haan tasselled loafers with high shine and conditioned leather"
              />
            </div>
            <p class="case-caption">
              Applied a high shine to this black pair of Cole Haan tasselled
              loafers, while thoroughly conditioning the leather.
            </p>
          </article>
        </div>

        <!-- Row 3 -->
        <div class="showcase-grid">
          <!-- Card 7 -->
          <article class="case-card">
            <div class="case-images">
              <img
                src="assets/showcase-07-before.jpg"
                alt="Before - ECCO sneakers with severely-yellowed mid-soles"
              />
              <img
                src="assets/showcase-07-after.jpg"
                alt="After - ECCO sneakers restored off-white mid-soles"
              />
            </div>
            <p class="case-caption">
              Cleaned and treated the severely-yellowed mid-soles of a pair of
              ECCO sneakers, restoring it to its original off-white colour.
            </p>
          </article>
          <!-- Card 8 -->
          <article class="case-card">
            <div class="case-images">
              <img
                src="assets/showcase-08-before.jpg"
                alt="Before - ECCO Multi-Vent Gore-Tex trainers with scuffed grey panels"
              />
              <img
                src="assets/showcase-08-after.jpg"
                alt="After - ECCO Multi-Vent Gore-Tex trainers deep cleansed with colour restored panels"
              />
            </div>
            <p class="case-caption">
              Deep cleansing of a pair of ECCO Multi-Vent Gore-Tex trainers with
              colour restoration on its scuffed grey panels of the shoe uppers.
            </p>
          </article>
          <!-- Card 9 -->
          <article class="case-card">
            <div class="case-images">
              <img
                src="assets/showcase-09-before.jpg"
                alt="Before - White Korean street style canvas shoes with stains"
              />
              <img
                src="assets/showcase-09-after.jpg"
                alt="After - White Korean street style canvas shoes thoroughly scrubbed"
              />
            </div>
            <p class="case-caption">
              Thoroughly scrubbed through a pair of white Korean street style
              canvas shoes.
            </p>
          </article>
        </div>

        <!-- Row 4 -->
        <div class="showcase-grid">
          <!-- Card 10 -->
          <article class="case-card">
            <div class="case-images">
              <img
                src="assets/showcase-10-before.jpg"
                alt="Before - Deep blue TOD’S penny loafers well-worn"
              />
              <img
                src="assets/showcase-10-after.jpg"
                alt="After - Deep blue TOD’S penny loafers conditioned with high shine"
              />
            </div>
            <p class="case-caption">
              Conditioned a well-worn pair of deep blue TOD’S penny loafers and
              finished off with a high shine.
            </p>
          </article>
          <!-- Card 11 -->
          <article class="case-card">
            <div class="case-images">
              <img
                src="assets/showcase-11-before.jpg"
                alt="Before - Black Bally toe cap Derbys lacking toe shine"
              />
              <img
                src="assets/showcase-11-after.jpg"
                alt="After - Black Bally toe cap Derbys conditioned with toe cap high shine"
              />
            </div>
            <p class="case-caption">
              Conditioned a pair of black Bally toe cap Derbys and finished off
              with a toe cap high shine.
            </p>
          </article>
          <!-- Card 12 -->
          <article class="case-card">
            <div class="case-images">
              <img
                src="assets/showcase-12-before.jpg"
                alt="Before - Leather slip-ons with dull finish"
              />
              <img
                src="assets/showcase-12-after.jpg"
                alt="After - Leather slip-ons nourished and finished with high shine"
              />
            </div>
            <p class="case-caption">
              Nourished the shoe leather and finished off these leather slip-ons
              with a high shine.
            </p>
          </article>
        </div>

        <!-- Row 5 -->
        <div class="showcase-grid">
          <!-- Card 13 -->
          <article class="case-card">
            <div class="case-images">
              <img
                src="assets/showcase-13-before.jpg"
                alt="Before - Square-toe Hush Puppies Derbys with dull uppers"
              />
              <img
                src="assets/showcase-13-after.jpg"
                alt="After - Square-toe Hush Puppies Derbys with all-round medium shine"
              />
            </div>
            <p class="case-caption">
              Elevated the look of these square-toe Hush Puppies Derbys with
              all-round medium shine.
            </p>
          </article>
          <!-- Card 14 -->
          <article class="case-card">
            <div class="case-images">
              <img
                src="assets/showcase-14-before.jpg"
                alt="Before - Gold-silver leather Oxfords aged and dull"
              />
              <img
                src="assets/showcase-14-after.jpg"
                alt="After - Gold-silver leather Oxfords cleaned and gold colour restored"
              />
            </div>
            <p class="case-caption">
              Revived an old pair of gold-silver leather Oxfords through
              cleaning and gold colour restoration.
            </p>
          </article>
          <!-- Card 15 -->
          <article class="case-card">
            <div class="case-images">
              <img
                src="assets/showcase-15-before.jpg"
                alt="Before - Composite PVC-leather-brocade shoes with faded gold, red and black portions"
              />
              <img
                src="assets/showcase-15-after.jpg"
                alt="After - Composite PVC-leather-brocade shoes with restored colours"
              />
            </div>
            <p class="case-caption">
              Performed colour restoration to a composite PVC-leather-brocade
              shoes, reviving its faded and scuffed gold, red and black portions
              to its former glory.
            </p>
          </article>
        </div>

        <!-- Row 6 -->
        <div class="showcase-grid">
          <!-- Card 16 -->
          <article class="case-card">
            <div class="case-images">
              <img
                src="assets/showcase-16-before.jpg"
                alt="Before - Bally brogues scuffed and dull"
              />
              <img
                src="assets/showcase-16-after.jpg"
                alt="After - Bally brogues buffed with minor colour restoration and toe cap shine"
              />
            </div>
            <p class="case-caption">
              Buffed up and performed minor colour restoration on a pair of
              Bally brogues, and finished with a toe cap shine.
            </p>
          </article>
          <!-- Card 17 -->
          <article class="case-card">
            <div class="case-images">
              <img
                src="assets/showcase-17-before.jpg"
                alt="Before - Comme Des Garcons cracked leather slip-ons matte gold finish"
              />
              <img
                src="assets/showcase-17-after.jpg"
                alt="After - Comme Des Garcons cracked leather slip-ons conditioned and buffed"
              />
            </div>
            <p class="case-caption">
              Cleaned and nourished the leather of these brown toe cap Derbys,
              finishing with a medium shine.
            </p>
          </article>
        </div>

        <div class="showcase-grid">
          <!-- Card 1 -->
          <article class="case-card">
            <div class="case-images">
              <img
                src="assets/shoe1_before.jpg"
                alt="Before cleaning - Adidas NMD CS2"
              />
              <img
                src="assets/shoe1_after.jpg"
                alt="After cleaning - Adidas NMD CS2"
              />
            </div>
            <p class="case-caption">
              Reduced severe yellowing of a pair of Adidas NMD CS2 Primeknit
              “Ronin”; restored close to original condition.
            </p>
          </article>
          <!-- Card 2 -->
          <article class="case-card">
            <div class="case-images">
              <img
                src="assets/shoe2_before.jpg"
                alt="Before restoration - Nike Air Force One"
              />
              <img
                src="assets/shoe2_after.jpg"
                alt="After restoration - Nike Air Force One"
              />
            </div>
            <p class="case-caption">
              Refreshed suede surfaces and reversed sole yellowing on this pair
              of Nike Air Force Ones.
            </p>
          </article>
          <!-- Card 3 -->
          <article class="case-card">
            <div class="case-images">
              <img
                src="assets/shoe3_before.jpg"
                alt="Before deep clean - On Cloudrunner 2"
              />
              <img
                src="assets/shoe3_after.jpg"
                alt="After deep clean - On Cloudrunner 2"
              />
            </div>
            <p class="case-caption">
              Deeply cleansed a pair of On Cloudrunner 2, finished with a
              waterproofing coat.
            </p>
          </article>
        </div>
      </section>
    </main>

    <main class="container page-top">
      <section class="our-services">
        <h1>The Services</h1>
        <p>All services include complimentary pick-up from your desired location and a return delivery when the job is done.</p>
        <div class="services-table-wrap">
          <table class="services-table" aria-describedby="services-note">
            <thead>
              <tr>
                <th scope="col">Service</th>
                <th scope="col">Description</th>
                <th scope="col" class="price-col">Price</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <th scope="row">BUFF’s Dress Shoe Deep Shine</th>
                <td>
                  Cleaning and stripping old wax layers (if any) + Leather
                  conditioning and nourishment + Shoe cream colour restoration +
                  Waxing and shining (medium or high shine)
                </td>
                <td class="price">S$30</td>
              </tr>
              <tr>
                <th scope="row">BUFF’s Sneaker Revival Clean</th>
                <td>
                  Thorough cleaning and washing of sneaker uppers, midsoles,
                  soles, insoles and shoe laces + Protective water proofing
                </td>
                <td class="price">S$30</td>
              </tr>
              <tr>
                <th scope="row">Unyellowing of Sneaker Soles</th>
                <td>Whitening restoration of yellowed soles and midsoles</td>
                <td class="price">S$30</td>
              </tr>
              <tr>
                <th scope="row">Minor Restoration</th>
                <td>Minor touch ups and repairs</td>
                <td class="price">&gt;S$30*</td>
              </tr>
            </tbody>
          </table>
          <p id="services-note" class="services-note">
            * Actual fee depends on restoration deliverables
          </p>
        </div>
      </section>
    </main>

    <footer class="site-footer">
      <div class="container">
        <div class="footer-left">
          <h3 class="footer-title">Contact Us</h3>
          <p>
            <svg fill="none" width="20px" height="20px" viewBox="0 0 24 24" id="phone" data-name="Line Color" xmlns="http://www.w3.org/2000/svg" class="icon line-color"><path id="primary" d="M21,15v3.93a2,2,0,0,1-2.29,2A18,18,0,0,1,3.14,5.29,2,2,0,0,1,5.13,3H9a1,1,0,0,1,1,.89,10.74,10.74,0,0,0,1,3.78,1,1,0,0,1-.42,1.26l-.86.49a1,1,0,0,0-.33,1.46,14.08,14.08,0,0,0,3.69,3.69,1,1,0,0,0,1.46-.33l.49-.86A1,1,0,0,1,16.33,13a10.74,10.74,0,0,0,3.78,1A1,1,0,0,1,21,15Z" style="fill: none; stroke: #fff; stroke-linecap: round; stroke-linejoin: round; stroke-width: 2;"></path></svg>
            <svg width="20px" height="20px" viewBox="0 0 192 192" xmlns="http://www.w3.org/2000/svg" fill="none"><path stroke="#fff" stroke-width="12" d="M23.073 88.132s65.458-26.782 88.16-36.212c8.702-3.772 38.215-15.843 38.215-15.843s13.621-5.28 12.486 7.544c-.379 5.281-3.406 23.764-6.433 43.756-4.54 28.291-9.459 59.221-9.459 59.221s-.756 8.676-7.188 10.185c-6.433 1.509-17.027-5.281-18.919-6.79-1.513-1.132-28.377-18.106-38.214-26.404-2.649-2.263-5.676-6.79.378-12.071 13.621-12.447 29.891-27.913 39.728-37.72 4.54-4.527 9.081-15.089-9.837-2.264-26.864 18.483-53.35 35.835-53.35 35.835s-6.053 3.772-17.404.377c-11.351-3.395-24.594-7.921-24.594-7.921s-9.08-5.659 6.433-11.693Z"/></svg>            +65 91870187
          </p>
          <p>
            Email: <a href="mailto:hello@buffwork.com">hello@buffwork.com</a>
          </p>
          <p class="footer-btn">
            <a class="btn alt" href="admin.html">Sign In</a>
          </p>
        </div>
        <div class="footer-right footer-note">
          <p>Business Registration Number: 53512026E</p>
          <p>@Buff @All Rights Reserved</p>
        </div>
      </div>
    </footer>

    <!-- Floating WhatsApp button bottom right -->
    <div class="fab">
      <a
        href="https://wa.me/6591870187"
        target="_blank"
        rel="noopener"
        aria-label="Chat on WhatsApp"
      >
        <span>📞 WhatsApp</span>
      </a>
    </div>

    <script>
      (function () {
        var toggle = document.getElementById("theme-toggle");
        var burger = document.getElementById("hamburger");
        var menu = document.getElementById("mobile-menu");
        function isDark() {
          return document.documentElement.getAttribute("data-theme") === "dark";
        }
        function updateLabel() {
          if (toggle) {
            toggle.textContent = isDark() ? "Dark" : "Light";
            toggle.setAttribute("aria-pressed", String(isDark()));
          }
        }
        function setMode(dark) {
          if (dark) {
            document.documentElement.setAttribute("data-theme", "dark");
            try {
              localStorage.setItem("theme", "dark");
            } catch (e) {}
          } else {
            document.documentElement.removeAttribute("data-theme");
            try {
              localStorage.removeItem("theme");
            } catch (e) {}
          }
          updateLabel();
        }
        updateLabel();
        if (toggle)
          toggle.addEventListener("click", function () {
            setMode(!isDark());
          });
        if (burger && menu) {
          function closeMenu() {
            menu.classList.remove("open");
            burger.setAttribute("aria-expanded", "false");
            menu.setAttribute("hidden", "");
          }
          function openMenu() {
            menu.classList.add("open");
            burger.setAttribute("aria-expanded", "true");
            menu.removeAttribute("hidden");
          }
          burger.addEventListener("click", function () {
            if (menu.classList.contains("open")) closeMenu();
            else openMenu();
          });
          document.addEventListener("click", function (e) {
            if (!menu.contains(e.target) && !burger.contains(e.target))
              closeMenu();
          });
        }
        // Parallax disabled intentionally
      })();
    </script>
    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/12.4.0/firebase-app.js";
      import {
        initializeFirestore,
        collection,
        getDocs,
        query,
        orderBy,
        doc,
        getDoc,
      } from "https://www.gstatic.com/firebasejs/12.4.0/firebase-firestore.js";

      const firebaseConfig = {
        apiKey: "AIzaSyCH1gJdghp8-9F_-Nu6CeFUdLt7Phz5XKQ",
        authDomain: "buffworks-ba25a.firebaseapp.com",
        projectId: "buffworks-ba25a",
        storageBucket: "buffworks-ba25a.appspot.com",
        messagingSenderId: "30729552717",
        appId: "1:30729552717:web:5d4d280877c44ac6102d04",
        measurementId: "G-0WMFLVR59M",
      };

      const app = initializeApp(firebaseConfig);
      const db = initializeFirestore(app, {
        experimentalAutoDetectLongPolling: true,
        useFetchStreams: false,
      });

      function sanitizeAllowedHtml(inputHtml) {
        const container = document.createElement('div');
        container.innerHTML = inputHtml || '';
        function clean(node) {
          if (node.nodeType === Node.TEXT_NODE) return node.cloneNode();
          if (node.nodeType !== Node.ELEMENT_NODE) return document.createTextNode('');
          const tag = node.tagName.toLowerCase();
          const isAllowed = tag === 'strong' || tag === 'b' || tag === 'br' || tag === 'a';
          if (!isAllowed) return document.createTextNode(node.textContent || '');
          const out = document.createElement(tag === 'b' ? 'strong' : tag);
          if (tag === 'a') {
            const href = node.getAttribute('href') || '';
            if (/^mailto:/i.test(href)) {
              out.setAttribute('href', href);
              const cls = node.getAttribute('class');
              if (cls) out.setAttribute('class', cls);
              const id = node.getAttribute('id');
              if (id) out.setAttribute('id', id);
            } else {
              return document.createTextNode(node.textContent || '');
            }
          }
          Array.from(node.childNodes).forEach(function (child) {
            out.appendChild(clean(child));
          });
          return out;
        }
        const wrapper = document.createElement('div');
        Array.from(container.childNodes).forEach(function (n) {
          wrapper.appendChild(clean(n));
        });
        return wrapper.innerHTML;
      }

      async function renderHeroSubtitle() {
        try {
          const el = document.querySelector('.hero-subtitle');
          if (!el) return;
          const original = el.innerHTML;
          const ref = doc(db, 'content', 'heroSubtitle');
          const snap = await getDoc(ref);
          if (snap.exists()) {
            const html = String(snap.data().html || '');
            const safe = sanitizeAllowedHtml(html);
            el.innerHTML = safe;
            el.setAttribute('data-hero-loaded', 'remote');
            console.debug('[BUFF] Hero subtitle loaded from Firestore');
          } else {
            el.innerHTML = original;
            el.setAttribute('data-hero-loaded', 'default');
            console.debug('[BUFF] Hero subtitle document missing; using default');
          }
        } catch (e) {
          console.error('[BUFF] Failed to load hero subtitle', e);
        }
      }

      function chunk(arr, size) {
        const out = [];
        for (let i = 0; i < arr.length; i += size)
          out.push(arr.slice(i, i + size));
        return out;
      }
      function card(item) {
        const article = document.createElement("article");
        article.className = "case-card";
        const images = document.createElement("div");
        images.className = "case-images";
        const bw = document.createElement("div");
        bw.className = "img-wrap";
        bw.setAttribute("data-label", "before");
        const b = document.createElement("img");
        b.src = item.beforeData || item.beforeUrl;
        b.alt = item.beforeAlt || `Before - ${item.title || "Restoration"}`;
        bw.appendChild(b);
        const aw = document.createElement("div");
        aw.className = "img-wrap";
        aw.setAttribute("data-label", "after");
        const a = document.createElement("img");
        a.src = item.afterData || item.afterUrl;
        a.alt = item.afterAlt || `After - ${item.title || "Restoration"}`;
        aw.appendChild(a);
        images.appendChild(bw);
        images.appendChild(aw);
        const cap = document.createElement("p");
        cap.className = "case-caption";
        cap.textContent = item.caption || "";
        article.appendChild(images);
        article.appendChild(cap);
        return article;
      }
      async function renderHomeShowcase() {
        const root = document.getElementById("home-showcase-root");
        if (!root) return;
        const titleRow = root.querySelector(".title-row");
        root.innerHTML = "";
        if (titleRow) root.appendChild(titleRow);
        // Loading UI
        const loadingRow = document.createElement("div");
        loadingRow.className = "showcase-grid";
        const loading = document.createElement("div");
        loading.className = "loading";
        const spinner = document.createElement("div");
        spinner.className = "spinner";
        loading.appendChild(spinner);
        loadingRow.appendChild(loading);
        root.appendChild(loadingRow);
        try {
          const qy = query(collection(db, "gallery"), orderBy("order", "asc"));
          const snap = await getDocs(qy);
          const items = snap.docs.map((d) => ({ id: d.id, ...d.data() }));
          root.innerHTML = "";
          if (titleRow) root.appendChild(titleRow);
          for (const group of chunk(items, 3)) {
            const row = document.createElement("div");
            row.className = "showcase-grid";
            for (const it of group) row.appendChild(card(it));
            root.appendChild(row);
          }
        } catch (e) {
          console.error(e);
        }
      }
      renderHeroSubtitle();
      renderHomeShowcase();
    </script>
  </body>
</html>
